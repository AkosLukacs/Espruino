(function(l){g.reset().clearRect(Bangle.appRect);Bangle.setLCDPower(1);if(l){var c=l[""],e=Object.keys(l);c&&(e.splice(e.indexOf(""),1),c.back&&(l["< Back"]=c.back,e.unshift("< Back")));e.forEach(b=>{b=l[b];"object"!=typeof b||"boolean"!=typeof b.value||b.format||(b.format=a=>atob(a?"AAwMggC///7//////////8///w///D/y8P/4A//8D/////////+///4=":"AAwMgQD/+AGAGAGAGAGAGAGAGAGAH/8="))});c instanceof Object||(c={});c.fontHeight=c.fontHeight||16;void 0===c.selected&&(c.selected=0);
c.fontHeight||(c.fontHeight=6);var q=Bangle.appRect,r=q.x,k=q.x2-11,n=q.y,t=q.y2-20;c.title&&(n+=c.fontHeight+2);var d={lastIdx:0,draw:function(b,a){var p=0|Math.min((t-n)/c.fontHeight,e.length),f=E.clip(c.selected-(p>>1),0,e.length-p);f!=d.lastIdx&&(b=void 0);d.lastIdx=f;var u=f+p<e.length,h=n;g.reset().setFont("6x8",2).setFontAlign(0,-1,0);c.predraw&&c.predraw(g);void 0===b&&c.title&&(g.drawString(c.title,(r+k)/2,n-c.fontHeight-2),g.drawLine(r,n-2,k,n-2));void 0!==b&&(f<b&&(h+=c.fontHeight*(b-f),
f=b),f+p>a&&(p=1+a-b));for(;p--;){a=e[f];b=l[a];var m=f==c.selected&&!d.selectEdit;g.setColor(m?g.theme.bgH:g.theme.bg);g.fillRect(r,h,k,h+c.fontHeight-1);g.setColor(m?g.theme.fgH:g.theme.fg);g.setFontAlign(-1,-1);g.drawString(a,r,h);"object"==typeof b&&(a=k,m=b.value,b.format&&(m=b.format(m)),d.selectEdit&&f==c.selected&&(a-=25,g.setColor(g.theme.bgH).fillRect(a-(g.stringWidth(m)+4),h,k,h+c.fontHeight-1),g.setColor(g.theme.fgH).drawImage("\f\u0005\u0081\x00 \u0007\x00\u00f9\u00f0\u000e\x00@",a,h+
(c.fontHeight-10)/2,{scale:2})),g.setFontAlign(1,-1),g.drawString(m,a-2,h));g.setColor(g.theme.fg);h+=c.fontHeight;f++}g.setFontAlign(-1,-1);g.drawImage("\b\b\u0001\u00108|\u00fe\u0010\u0010\u0010\u0010",k+2,40);g.drawImage("\b\b\u0001\u0010\u0010\u0010\u0010\u00fe|8\u0010",k+2,194);g.drawImage("\b\b\u0001\x00\b\f\u000e\u00ff\u000e\f\b",k+2,116);g.setColor(u?g.theme.fg:g.theme.bg).fillPoly([104,220,136,220,120,228]);g.flip()},select:function(){var b=l[e[c.selected]];if("function"==typeof b)b(d);else if("object"==
typeof b){if("number"==typeof b.value)d.selectEdit=d.selectEdit?void 0:b;else if("boolean"==typeof b.value&&(b.value=!b.value),b.onchange)b.onchange(b.value);d.draw()}},move:function(b){var a=d.selectEdit;if(a){a=d.selectEdit;a.value-=(b||1)*(a.step||1);void 0!==a.min&&a.value<a.min&&(a.value=a.wrap?a.max:a.min);void 0!==a.max&&a.value>a.max&&(a.value=a.wrap?a.min:a.max);if(a.onchange)a.onchange(a.value);d.draw(c.selected,c.selected)}else a=c.selected,c.selected=(b+c.selected+e.length)%e.length,d.draw(Math.min(a,
c.selected),Math.max(a,c.selected))}};d.draw();Bangle.setUI("updown",b=>{b?d.move(b):d.select()});return d}Bangle.setUI()})