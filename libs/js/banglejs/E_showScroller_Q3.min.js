(function(d){function m(a){return a*d.h+b.y-f}function k(a){return Math.floor((a+f-b.y)/d.h)}if(!d)return Bangle.setUI();Bangle.setUI({mode:"custom",back:d.back,remove:d.remove,drag:a=>{var c=a.dy;e.scroll-c>l&&(c=e.scroll-l);e.scroll-c<h&&(c=e.scroll-h);e.scroll-=c;c=f;f=e.scroll&-2;if(c-=f){g.reset().setClipRect(b.x,b.y,b.x2,b.y2).scroll(0,c);a=a.dy;if(0>a)for(a=Math.max(b.y2-(1-a),b.y),g.setClipRect(b.x,a,b.x2,b.y2),c=k(a),a=m(c);a<b.y2;)d.draw(c,{x:b.x,y:a,w:b.w,h:d.h}),
c++,a+=d.h;else for(a=Math.min(b.y+a,b.y2),g.setClipRect(b.x,b.y,b.x2,a),c=k(a),a=m(c);a>b.y-d.h;)d.draw(c,{x:b.x,y:a,w:b.w,h:d.h}),a-=d.h,c--;g.setClipRect(0,0,g.getWidth()-1,g.getHeight()-1)}},touch:(a,c)=>{c.y<b.y-4||(a=k(c.y),(0>h||0<=a)&&a<d.c&&d.select(a,{x:c.x,y:c.y+f-b.y-a*d.h}))}});var b=Bangle.appRect,h=0|d.scrollMin,l=d.h*d.c-b.h;l<h&&(l=h);var e={scroll:E.clip(0|d.scroll,h,l),draw:()=>{g.reset().clearRect(b).setClipRect(b.x,b.y,b.x2,b.y2);for(var a=k(b.y),c=Math.min(k(b.y2),d.c-1);a<=
c;a++)d.draw(a,{x:b.x,y:m(a),w:b.w,h:d.h});g.setClipRect(0,0,g.getWidth()-1,g.getHeight()-1)},drawItem:a=>{var c=m(a);g.reset().setClipRect(b.x,c,b.x2,c+d.h);d.draw(a,{x:b.x,y:c,w:b.w,h:d.h});g.setClipRect(0,0,g.getWidth()-1,g.getHeight()-1)}},f=e.scroll&-2;e.draw();g.flip();return e})